;; A ------------------------------------------------------

(a-edge 1 2)
(a-edge 1 4)
(a-edge 2 3)
(a-edge 2 4)
(a-edge 2 5)
(a-edge 2 6)
(a-edge 3 3)
(a-edge 3 4)
(a-edge 5 3)

[(a-edge x y) --> (a-node x)]
[(a-node x) (count a-edge x _ count) --> (a-node-degree x count)]

;; B ------------------------------------------------------

(b-foo 1)
(b-foo 2)
(b-foo 3)

(b-bar 1)
(b-fez 3)

[(b-fez x) --> (b-bar x)]

[(b-foo x)
 (~ b-bar x)
 -->
 (b-foo-not-bar x)]

(b-bar-sum {sum b-bar})

;; C ------------------------------------------------------

(c-foo "a" 1)
(c-foo "b" 2)
(c-foo "a" 10)
(c-foo "b" 20)
(c-foo "a" 100)
(c-foo "b" 200)
(c-foo "a" 1000)
(c-foo "b" 2000)

(c-max-foo "a" {maximum c-foo "a"})
(c-max-foo "b" {maximum c-foo "b"})

(c-min-foo "a" {minimum c-foo "a"})
(c-min-foo "b" {minimum c-foo "b"})
(c-min-foo "c" {minimum c-foo "c"})

;; D ------------------------------------------------------

(d-foo 1 2 3 4 5 6 7 8 9 10)
(d-bar 0)
(d-bar 1)
[(d-bar a0)
 (+ a1 1 a2)
 (+ a2 1 a3)
 (+ a3 1 a4)
 (+ a4 1 a5)
 (+ a5 1 a6)
 (+ a6 1 a7)
 (+ a7 1 a8)
 (+ a8 1 a9)
 (+ a9 1 a10)
 (+ a0 1 a1)
 (~ d-foo a1 a2 a3 a4 a5 a6 a7 a8 a9 a10)
 -->
 (d-res a0)]

;; E ------------------------------------------------------

[(~ e-foo _ x 100)
 (e-bar x)
 -->
 (e-res x)]

[(~ e-foo x _ _)
 (e-bar x)
 -->
 (e-res2 x)]

(e-foo 1 2 100)
(e-foo 1 3 100)

(e-bar 1)
(e-bar 2)
(e-bar 3)


;; F ------------------------------------------------------

(f-foo 1 2)
(f-foo 1 4)

(f-bar 2 100 1)
(f-bar 4 200 1)

[(f-foo x y)
 (~ f-bar y 100 x)
 -->
 (f-res x y)]


;; G ------------------------------------------------------
;; interaction of aggregators and --
(g-foo 1 2)
(g-foo 1 4)

(g-bar 2 100 1)
(g-bar 4 200 1)

[(g-foo x y)
 --
 (~ g-bar y 100 x)
 -->
 (g-res x y)]

;; H ------------------------------------------------------

(h-foo 1 2 3 4 5)

(h-bar1 5 2)
(h-bar2 3 1)
(h-bar3 4 4)
(h-bar4 2 4)
(h-bar5 3 3)

(h-bars 5 2)
(h-bars 3 1)
(h-bars 4 4)
(h-bars 2 4)
(h-bars 3 3)

(h-baz1 1 2 3)

[(h-foo x1 x2 x3 x4 x5)
 -->
 [(~ h-bar1 x5 x2) --> (h-res1 x1 x2 x3 x4 x5)] 
 [(~ h-bar2 x3 x1) --> (h-res1 x1 x2 x3 x4 x5)] 
 [(~ h-bar3 x4 x4) --> (h-res1 x1 x2 x3 x4 x5)]
 [(~ h-bar4 x2 x4) --> (h-res1 x1 x2 x3 x4 x5)]
 [(~ h-bar5 x3 x3) --> (h-res1 x1 x2 x3 x4 x5)]

 
 [~(h-baz1 _ x2 _) --> (h-res2 x1 x2 x3 x4 x5)]
 [~(h-baz1 x2 _ _) --> (h-res3 x1 x2 x3 x4 x5)]
 [~(h-baz1 x1 _ x3) --> (h-res4 x1 x2 x3 x4 x5)]

 [(~ h-bars x3 x2) --> (h-has-3-2 x3 x2)]
 [(~ h-bars x1 x3) --> (h-has-1-3 x1 x3)]
 [(~ h-bars x4 x2) --> (h-has-4-2 x4 x2)]
 [(~ h-bars x5 x5) --> (h-has-5-5 x5 x5)]
]

;; I ------------------------------------------------------

;; matrix-vector multiplication
(i-m 1 1 10)
(i-m 1 2 10)
(i-m 1 3 10)

(i-v 1 100)
(i-v 2 100)
(i-v 3 100)

(ind 1) (ind 2) (ind 3)

[(i-m i j x)
 (i-v j y)
 -->
 (i-t i j {* x y})]

[(ind i) (sum i-t i _ s) --> (i-mv i s)]

;; J ------------------------------------------------------

[(j-foo x y)
 (sum j-bar y _ x _ S)
 -->
 (j-res x y S)]

(j-foo 1 2)
(j-bar 2 500 1 600 1)
(j-bar 2 500 1 600 2)
(j-bar 2 500 1 600 5)

(j-foo 10 20)
(j-bar 20 500 10  600 10)
(j-bar 20 500 10  600 50)

(j-bar 20 500 110 600 50)
